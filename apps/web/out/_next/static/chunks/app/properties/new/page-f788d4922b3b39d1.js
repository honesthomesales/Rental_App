(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{1275:function(e,s,t){Promise.resolve().then(t.bind(t,7663))},7663:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7573),r=t(7653),n=t(1695),l=t(6286);let i=(0,t(4313).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=t(6991),c=t(2548),d=t(909),u=t(4452),m=t(4859);function h(e){let{address:s,city:t,state:n,zipCode:l,onCoordinatesFound:i,disabled:o=!1}=e,[c,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),b=async()=>{if(!s||!t||!n){x("Please fill in address, city, and state first");return}h(!0),x(null);try{let e="".concat(s,", ").concat(t,", ").concat(n," ").concat(l).trim(),a=m.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;if(a&&"YOUR_GOOGLE_MAPS_API_KEY_HERE"!==a){let s=await fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(encodeURIComponent(e),"&key=").concat(a));if(!s.ok)throw Error("Failed to geocode address");let t=await s.json();if("OK"===t.status&&t.results&&t.results.length>0){let e=t.results[0].geometry.location,s=e.lat,a=e.lng;i(s,a),x(null)}else"ZERO_RESULTS"===t.status?x("Address not found. Please check the address and try again."):"OVER_QUERY_LIMIT"===t.status?x("Geocoding service limit reached. Please try again later."):x("Geocoding error: ".concat(t.status))}else{let s=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(e),"&limit=1&addressdetails=1"));if(!s.ok)throw Error("Failed to geocode address");let t=await s.json();if(t&&t.length>0){let e=t[0],s=parseFloat(e.lat),a=parseFloat(e.lon);i(s,a),x(null)}else x("Address not found. Please check the address and try again.")}}catch(e){console.error("Geocoding error:",e),x("Failed to get coordinates. Please try again.")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{type:"button",onClick:b,disabled:o||c||!s||!t||!n,className:"btn btn-secondary text-sm w-full",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Getting Coordinates..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Get Coordinates from Address (Google Maps)"]})}),p&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:p}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Uses Google Maps Geocoding API for high accuracy. Free for up to 40,000 lookups/month."})]})}function p(){let e=(0,n.useRouter)(),[s,t]=(0,r.useState)(!1),[d,u]=(0,r.useState)({name:"",address:"",city:"",state:"",zip_code:"",property_type:"house",status:"empty",bedrooms:void 0,bathrooms:void 0,square_feet:void 0,year_built:void 0,purchase_price:void 0,purchase_date:"",current_value:void 0,monthly_rent:void 0,is_for_sale:!1,is_for_rent:!0,insurance_policy_number:"",insurance_provider:"",insurance_expiry_date:"",insurance_premium:void 0,owner_name:"",owner_phone:"",owner_email:"",latitude:void 0,longitude:void 0,notes:""}),m=e=>{let{name:s,value:t,type:a}=e.target,r=t;"number"===a?r=""===t?void 0:parseFloat(t):"checkbox"===a&&(r=e.target.checked),u(e=>({...e,[s]:r}))},p=async s=>{s.preventDefault(),t(!0);try{let s=await l.PropertiesService.create(d);s.success&&s.data?(c.ZP.success("Property created successfully!"),e.push("/properties")):(console.error("Create error:",s.error),c.ZP.error("Failed to create property"))}catch(e){console.error("Error:",e),c.ZP.error("Error creating property")}finally{t(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>e.back(),className:"btn btn-secondary",children:[(0,a.jsx)(i,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Property"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create a new rental property"})]})]})})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("form",{onSubmit:p,className:"space-y-8",children:[(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"label",children:"Property Name *"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:m,className:"input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"property_type",className:"label",children:"Property Type *"}),(0,a.jsxs)("select",{id:"property_type",name:"property_type",value:d.property_type,onChange:m,className:"input",required:!0,children:[(0,a.jsx)("option",{value:"house",children:"House"}),(0,a.jsx)("option",{value:"singlewide",children:"Single Wide"}),(0,a.jsx)("option",{value:"doublewide",children:"Double Wide"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"address",className:"label",children:"Address *"}),(0,a.jsx)("input",{type:"text",id:"address",name:"address",value:d.address,onChange:m,className:"input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"city",className:"label",children:"City *"}),(0,a.jsx)("input",{type:"text",id:"city",name:"city",value:d.city,onChange:m,className:"input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"state",className:"label",children:"State *"}),(0,a.jsx)("input",{type:"text",id:"state",name:"state",value:d.state,onChange:m,className:"input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"zip_code",className:"label",children:"ZIP Code *"}),(0,a.jsx)("input",{type:"text",id:"zip_code",name:"zip_code",value:d.zip_code,onChange:m,className:"input",required:!0})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Location Coordinates (Optional)"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Add latitude and longitude coordinates to display this property on the map view."}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Auto-Convert Address to Coordinates"}),(0,a.jsx)(h,{address:d.address,city:d.city,state:d.state,zipCode:d.zip_code,onCoordinatesFound:(e,s)=>{u(t=>({...t,latitude:e,longitude:s})),c.ZP.success("Coordinates found and added!")},disabled:s})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"latitude",className:"label",children:"Latitude"}),(0,a.jsx)("input",{type:"number",id:"latitude",name:"latitude",value:d.latitude||"",onChange:m,className:"input",step:"any",placeholder:"e.g., 40.7128"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"longitude",className:"label",children:"Longitude"}),(0,a.jsx)("input",{type:"number",id:"longitude",name:"longitude",value:d.longitude||"",onChange:m,className:"input",step:"any",placeholder:"e.g., -74.0060"})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Property Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"bedrooms",className:"label",children:"Bedrooms"}),(0,a.jsx)("input",{type:"number",id:"bedrooms",name:"bedrooms",value:d.bedrooms||"",onChange:m,className:"input",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"bathrooms",className:"label",children:"Bathrooms"}),(0,a.jsx)("input",{type:"number",id:"bathrooms",name:"bathrooms",value:d.bathrooms||"",onChange:m,className:"input",min:"0",step:"0.5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"square_feet",className:"label",children:"Square Feet"}),(0,a.jsx)("input",{type:"number",id:"square_feet",name:"square_feet",value:d.square_feet||"",onChange:m,className:"input",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"year_built",className:"label",children:"Year Built"}),(0,a.jsx)("input",{type:"number",id:"year_built",name:"year_built",value:d.year_built||"",onChange:m,className:"input",min:"1800",max:new Date().getFullYear()})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Financial Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"monthly_rent",className:"label",children:"Monthly Rent"}),(0,a.jsx)("input",{type:"number",id:"monthly_rent",name:"monthly_rent",value:d.monthly_rent||"",onChange:m,className:"input",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"purchase_price",className:"label",children:"Purchase Price"}),(0,a.jsx)("input",{type:"number",id:"purchase_price",name:"purchase_price",value:d.purchase_price||"",onChange:m,className:"input",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"current_value",className:"label",children:"Current Value"}),(0,a.jsx)("input",{type:"number",id:"current_value",name:"current_value",value:d.current_value||"",onChange:m,className:"input",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"purchase_date",className:"label",children:"Purchase Date"}),(0,a.jsx)("input",{type:"date",id:"purchase_date",name:"purchase_date",value:d.purchase_date,onChange:m,className:"input"})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Status & Availability"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"label",children:"Status"}),(0,a.jsxs)("select",{id:"status",name:"status",value:d.status,onChange:m,className:"input",children:[(0,a.jsx)("option",{value:"empty",children:"Empty"}),(0,a.jsx)("option",{value:"rented",children:"Rented"}),(0,a.jsx)("option",{value:"owner_finance",children:"Owner Finance"}),(0,a.jsx)("option",{value:"lease_purchase",children:"Lease Purchase"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"is_for_rent",checked:d.is_for_rent,onChange:m,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Available for Rent"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"is_for_sale",checked:d.is_for_sale,onChange:m,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Available for Sale"})]})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Additional Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"label",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",value:d.notes,onChange:m,className:"input",rows:4,placeholder:"Any additional notes about the property..."})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.back(),className:"btn btn-secondary",disabled:s,children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:[s&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),s?"Creating...":"Create Property"]})]})]})})]})}},909:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(4313).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4452:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(4313).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6991:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(4313).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},1695:function(e,s,t){"use strict";var a=t(1219);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},4859:function(e,s,t){"use strict";var a,r;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(r=t.g.process)?void 0:r.env)?t.g.process:t(9566)},9566:function(e){!function(){var s={229:function(e){var s,t,a,r=e.exports={};function n(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{t="function"==typeof clearTimeout?clearTimeout:l}catch(e){t=l}}();var o=[],c=!1,d=-1;function u(){c&&a&&(c=!1,a.length?o=a.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var s=o.length;s;){for(a=o,o=[];++d<s;)a&&a[d].run();d=-1,s=o.length}a=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(s){try{return t.call(null,e)}catch(s){return t.call(this,e)}}}(e)}}function h(e,s){this.fun=e,this.array=s}function p(){}r.nextTick=function(e){var s=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)s[t-1]=arguments[t];o.push(new h(e,s)),1!==o.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},t={};function a(e){var r=t[e];if(void 0!==r)return r.exports;var n=t[e]={exports:{}},l=!0;try{s[e](n,n.exports,a),l=!1}finally{l&&delete t[e]}return n.exports}a.ab="//";var r=a(229);e.exports=r}()}},function(e){e.O(0,[334,134,286,293,528,744],function(){return e(e.s=1275)}),_N_E=e.O()}]);