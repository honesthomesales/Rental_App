(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{4911:function(e,s,t){Promise.resolve().then(t.bind(t,7981))},7981:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(7573),r=t(1695),l=t(7653),i=t(6286),n=t(3351),c=t(8113),o=t(8204),d=t(1797),m=t(269),x=t(6991),p=t(2548);let u=o.Ry({name:o.Z_().min(1,"Property name is required"),address:o.Z_().min(1,"Address is required"),city:o.Z_().min(1,"City is required"),state:o.Z_().length(2,"State must be 2 characters"),zip_code:o.Z_().min(5,"Valid ZIP code is required"),property_type:o.Km(["house","singlewide","doublewide"]),status:o.Km(["rented","empty","owner_finance","lease_purchase"]).default("empty"),bedrooms:o.Rx().optional(),bathrooms:o.Rx().optional(),square_feet:o.Rx().optional(),year_built:o.Rx().optional(),purchase_price:o.Rx().optional(),purchase_date:o.Z_().optional(),current_value:o.Rx().optional(),monthly_rent:o.Rx().optional(),is_for_sale:o.O7().default(!1),is_for_rent:o.O7().default(!0),insurance_policy_number:o.Z_().optional(),insurance_provider:o.Z_().optional(),insurance_expiry_date:o.Z_().optional(),insurance_premium:o.Rx().optional(),owner_name:o.Z_().optional(),owner_phone:o.Z_().optional(),owner_email:o.Z_().email().optional().or(o.i0("")),notes:o.Z_().optional(),rent_cadence:o.Z_().optional()});function h(e){let{property:s,onSuccess:t,onCancel:r}=e,[o,h]=(0,l.useState)(!1),{register:b,handleSubmit:y,formState:{errors:j},reset:N}=(0,n.cI)({resolver:(0,c.F)(u),defaultValues:s?{name:s.name,address:s.address,city:s.city,state:s.state,zip_code:s.zip_code,property_type:s.property_type,status:s.status,bedrooms:s.bedrooms||void 0,bathrooms:s.bathrooms||void 0,square_feet:s.square_feet||void 0,year_built:s.year_built||void 0,purchase_price:s.purchase_price||void 0,purchase_date:s.purchase_date||void 0,current_value:s.current_value||void 0,monthly_rent:s.monthly_rent||void 0,is_for_sale:s.is_for_sale,is_for_rent:s.is_for_rent,insurance_policy_number:s.insurance_policy_number||void 0,insurance_provider:s.insurance_provider||void 0,insurance_expiry_date:s.insurance_expiry_date||void 0,insurance_premium:s.insurance_premium||void 0,owner_name:s.owner_name||void 0,owner_phone:s.owner_phone||void 0,owner_email:s.owner_email||void 0,notes:s.notes||void 0}:{status:"empty",is_for_rent:!0,is_for_sale:!1}}),f=async e=>{try{if(h(!0),s){let a=await i.PropertiesService.update(s.id,e);a.success&&a.data?(p.ZP.success("Property updated successfully"),null==t||t(a.data)):p.ZP.error(a.error||"Failed to update property")}else{let s=await i.PropertiesService.create(e);s.success&&s.data?(p.ZP.success("Property created successfully"),N(),null==t||t(s.data)):p.ZP.error(s.error||"Failed to create property")}}catch(e){p.ZP.error("An error occurred")}finally{h(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Property":"Add New Property"})]}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:y(f),className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Name *"}),(0,a.jsx)("input",{...b("name"),className:"input",placeholder:"Enter property name"}),j.name&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type *"}),(0,a.jsxs)("select",{...b("property_type"),className:"input",children:[(0,a.jsx)("option",{value:"house",children:"House"}),(0,a.jsx)("option",{value:"singlewide",children:"Singlewide"}),(0,a.jsx)("option",{value:"doublewide",children:"Doublewide"})]}),j.property_type&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.property_type.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"inline-flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"rented",...b("status"),className:"form-radio text-primary-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Rented"})]}),(0,a.jsxs)("label",{className:"inline-flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"empty",...b("status"),className:"form-radio text-primary-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Empty"})]}),(0,a.jsxs)("label",{className:"inline-flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"owner_finance",...b("status"),className:"form-radio text-primary-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Owner Finance"})]}),(0,a.jsxs)("label",{className:"inline-flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"lease_purchase",...b("status"),className:"form-radio text-primary-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Lease Purchase"})]})]}),j.status&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.status.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,a.jsx)("input",{...b("address"),className:"input",placeholder:"Enter full address"}),j.address&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.address.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,a.jsx)("input",{...b("city"),className:"input",placeholder:"Enter city"}),j.city&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.city.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),(0,a.jsx)("input",{...b("state"),className:"input",placeholder:"TX",maxLength:2}),j.state&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.state.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),(0,a.jsx)("input",{...b("zip_code"),className:"input",placeholder:"78701"}),j.zip_code&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.zip_code.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),(0,a.jsx)("input",{...b("bedrooms",{valueAsNumber:!0}),type:"number",className:"input",placeholder:"3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms"}),(0,a.jsx)("input",{...b("bathrooms",{valueAsNumber:!0}),type:"number",step:"0.5",className:"input",placeholder:"2.5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Square Feet"}),(0,a.jsx)("input",{...b("square_feet",{valueAsNumber:!0}),type:"number",className:"input",placeholder:"2000"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year Built"}),(0,a.jsx)("input",{...b("year_built",{valueAsNumber:!0}),type:"number",className:"input",placeholder:"2020"})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Financial Information"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Rent"}),(0,a.jsx)("input",{...b("monthly_rent",{valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"2000.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Price"}),(0,a.jsx)("input",{...b("purchase_price",{valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"300000.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Date"}),(0,a.jsx)("input",{...b("purchase_date"),type:"date",className:"input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Value"}),(0,a.jsx)("input",{...b("current_value",{valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"350000.00"})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Status"})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{...b("is_for_rent"),type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Available for Rent"})]})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{...b("is_for_sale"),type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Available for Sale"})]})}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Owner Information"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name"}),(0,a.jsx)("input",{...b("owner_name"),className:"input",placeholder:"John Smith"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Phone"}),(0,a.jsx)("input",{...b("owner_phone"),className:"input",placeholder:"(512) 555-0101"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Email"}),(0,a.jsx)("input",{...b("owner_email"),type:"email",className:"input",placeholder:"owner@example.com"}),j.owner_email&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.owner_email.message})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Insurance Information"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Provider"}),(0,a.jsx)("input",{...b("insurance_provider"),className:"input",placeholder:"State Farm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Policy Number"}),(0,a.jsx)("input",{...b("insurance_policy_number"),className:"input",placeholder:"POL-001-2024"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),(0,a.jsx)("input",{...b("insurance_expiry_date"),type:"date",className:"input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Premium"}),(0,a.jsx)("input",{...b("insurance_premium",{valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"1200.00"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{...b("notes"),rows:4,className:"input resize-none",placeholder:"Additional notes about the property..."})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Cadence"}),(0,a.jsxs)("select",{...b("rent_cadence"),className:"input",children:[(0,a.jsx)("option",{value:"",children:"Select payment cadence"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"bi-weekly",children:"Bi-weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"This will be stored in the property notes and used for payment tracking"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:o,children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:o,children:[o?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),s?"Update Property":"Create Property"]})]})]})]})})}function b(){let e=(0,r.useSearchParams)(),s=(0,r.useRouter)(),t=e.get("id"),[n,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!t){x("Missing property ID");return}u(t)},[t]);let u=async e=>{try{d(!0),x(null);let s=await i.PropertiesService.getById(e);if(s.success&&s.data)c(s.data);else{let e=s.error||"Failed to load property";x(e),p.ZP.error(e)}}catch(s){console.error("Error loading property:",s);let e="An unexpected error occurred while loading the property";x(e),p.ZP.error(e)}finally{d(!1)}};return t?o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):m||!n?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Property"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:m||"Property not found"}),(0,a.jsx)("button",{onClick:()=>s.push("/properties"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Properties"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit Property: ",n.name]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Update property information"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(h,{property:n,onSuccess:e=>{p.ZP.success("Property updated successfully"),s.push("/properties")},onCancel:()=>{s.push("/properties")}})})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Invalid Property ID"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"No property ID was provided in the URL."}),(0,a.jsx)("button",{onClick:()=>s.push("/properties"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Properties"})]})})}function y(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(b,{})})}},1797:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(4313).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},1695:function(e,s,t){"use strict";var a=t(1219);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[334,134,918,286,293,528,744],function(){return e(e.s=4911)}),_N_E=e.O()}]);