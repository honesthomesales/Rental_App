(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{6425:function(e,a,t){Promise.resolve().then(t.bind(t,9997))},9997:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var s=t(7573),r=t(7653),l=t(6286),n=t(5155),i=t(3727),d=t(6673),c=t(7354),o=t(269),x=t(1503),m=t(2193),b=t(2548),h=t(3146),p=t.n(h);function j(e){let{tenant:a}=e,t=new Date,r=(()=>{let e=new Date(t);e.setDate(e.getDate()+1);let a=0,s=new Date(e);for(;a<5;)s.getDay()>=1&&5>=s.getDay()&&a++,s.setDate(s.getDate()+1);return s.setDate(s.getDate()-1),s})(),l=(a.total_due||0)+(a.total_late_fees||0),n=e=>e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f bg-white p-8 max-w-4xl mx-auto print:p-0",children:[(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-center mb-8 print:mb-6",children:[(0,s.jsx)("h1",{className:"jsx-b2a21a90a99b3b8f text-2xl font-bold text-gray-900 mb-2 print:text-xl",children:"5-Day Notice to Vacate or Pay Rent"}),(0,s.jsxs)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-600",children:["Date: ",n(r)]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 print:mb-6",children:[(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[(0,s.jsx)("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"To:"}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:[(0,s.jsxs)("p",{className:"jsx-b2a21a90a99b3b8f font-medium",children:[a.first_name," ",a.last_name]}),a.properties&&(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f",children:a.properties.address})]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[(0,s.jsx)("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"From:"}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:[(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f font-medium",children:"Honest Home Sales, LLC - Member: Billy Rochester"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f",children:"PO Box 705"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f",children:"Cowpens SC 29330"})]})]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f border-2 border-gray-300 p-6 mb-8 print:mb-6",children:[(0,s.jsx)("h2",{className:"jsx-b2a21a90a99b3b8f text-xl font-bold text-center text-gray-900 mb-6 print:mb-4",children:"NOTICE TO VACATE OR PAY RENT"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"This notice serves as formal notification that you are past due on your rent for the premises located at:"}),(0,s.jsx)("div",{className:"jsx-b2a21a90a99b3b8f bg-gray-50 p-4 mb-6 print:mb-4 border-l-4 border-red-500",children:(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f font-medium text-gray-900",children:a.properties?a.properties.address:"Property address not available"})}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"As of the date of this notice, you owe the following amounts:"}),(0,s.jsx)("div",{className:"jsx-b2a21a90a99b3b8f bg-red-50 p-4 mb-6 print:mb-4 border-l-4 border-red-500",children:(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f space-y-2",children:[(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Past Due Rent:"}),(0,s.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f font-medium",children:["$",(a.total_due||0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Late Fees:"}),(0,s.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f font-medium",children:["$",(a.total_late_fees||a.late_fees_owed||0).toLocaleString()]})]}),(0,s.jsx)("div",{className:"jsx-b2a21a90a99b3b8f border-t border-red-200 pt-2 mt-2",children:(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-gray-900 font-semibold",children:"Total Amount Due:"}),(0,s.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f text-2xl font-bold text-red-600 print:text-xl",children:["$",l.toLocaleString()]})]})})]})}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"You are hereby given 5 days from the date of this notice to either:"}),(0,s.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-none space-y-2 mb-6 print:mb-4",children:[(0,s.jsxs)("li",{className:"jsx-b2a21a90a99b3b8f flex items-start",children:[(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-green-600 mr-2 mt-1",children:"✅"}),(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Pay the full amount of rent owed immediately to bring your account current; or"})]}),(0,s.jsxs)("li",{className:"jsx-b2a21a90a99b3b8f flex items-start",children:[(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-green-600 mr-2 mt-1",children:"✅"}),(0,s.jsx)("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Vacate and surrender the premises to the landlord in accordance with the conditions below."})]})]}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"If you choose to voluntarily vacate the premises within this 5-day period, leave the property in pristine condition, and deliver possession to the landlord without causing additional damage or incurring further rent, then:"}),(0,s.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-disc list-inside space-y-2 mb-6 print:mb-4 text-gray-700",children:[(0,s.jsx)("li",{className:"jsx-b2a21a90a99b3b8f",children:"All late fees will be waived."}),(0,s.jsx)("li",{className:"jsx-b2a21a90a99b3b8f",children:"You will not be pursued for a judgment for unpaid rent."})]}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"However, if you fail to pay the rent in full, and do not vacate the premises within 5 days of this notice, legal action may be filed to recover possession of the property, unpaid rent, and any other damages permitted by law."}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f bg-yellow-50 p-4 mb-6 print:mb-4 border-l-4 border-yellow-500",children:[(0,s.jsx)("h4",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Important:"}),(0,s.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-disc list-inside space-y-1 text-gray-700",children:[(0,s.jsx)("li",{className:"jsx-b2a21a90a99b3b8f",children:"If you pay the full past due rent before the expiration of this notice, your tenancy will continue, and no further action will be taken at this time."}),(0,s.jsx)("li",{className:"jsx-b2a21a90a99b3b8f",children:"If you vacate voluntarily and leave the premises in pristine condition as determined by the landlord, you will be released from further liability for unpaid rent or late fees."})]})]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f grid grid-cols-1 md:grid-cols-2 gap-8 print:gap-6",children:[(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[(0,s.jsx)("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Landlord/Property Manager Signature:"}),(0,s.jsx)("div",{className:"jsx-b2a21a90a99b3b8f border-b-2 border-gray-400 h-12 mb-2 print:h-8"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-sm text-gray-600",children:"(Upload signature here)"})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[(0,s.jsx)("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Printed Name:"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Billy Rochester"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-sm text-gray-600",children:"Member: Honest Home Sales, LLC"})]})]}),(0,s.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f mt-8 print:mt-6",children:[(0,s.jsx)("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Date:"}),(0,s.jsx)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:n(t)})]}),(0,s.jsx)(p(),{id:"b2a21a90a99b3b8f",children:"@media print{.print\\\\.jsx-b2a21a90a99b3b8f:mb-6{margin-bottom:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:mb-4{margin-bottom:1rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:text-xl{font-size:1.25rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:p-0{padding:0!important}.print\\\\.jsx-b2a21a90a99b3b8f:gap-6{gap:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:mt-6{margin-top:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:h-8{height:2rem!important}}"})]})}function f(){let[e,a]=(0,r.useState)([]),[t,h]=(0,r.useState)(!0),[p,f]=(0,r.useState)(null),[g,u]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[_,L]=(0,r.useState)([]),[P,S]=(0,r.useState)(0);(0,r.useEffect)(()=>{T()},[]);let T=async()=>{try{h(!0);let e=await l.TenantsService.getLateTenants();e.success&&e.data?a(e.data):b.ZP.error("Failed to load late tenants")}catch(e){b.ZP.error("Error loading late tenants")}finally{h(!1)}},D=e=>e>5e3?"bg-red-50":e>2e3?"bg-orange-50":e>500?"bg-yellow-50":"bg-white",k=e=>e.leases&&e.leases.length>0?e.leases[0].rent||0:e.monthly_rent||0,R=e=>{if(e.leases&&e.leases.length>0){let a=e.leases[0].rent_cadence;if(a)switch(a.toLowerCase().trim()){case"weekly":return"weekly";case"bi-weekly":case"biweekly":case"bi_weekly":return"bi-weekly"}}return"monthly"},C=e=>{f(e),u(!0)},Z=async e=>{try{console.log("View periods clicked for tenant:",e.id,e.first_name,e.last_name),console.log("Tenant data:",e),f(e);let a=await l.RentPeriodsService.getTenantRentPeriods(e.id);if(console.log("Rent periods response:",a),!l.supabase){console.error("Supabase client not available"),b.ZP.error("Database connection not available");return}let{data:t}=await l.supabase.from("RENT_payments").select("id, amount, payment_date, payment_type").eq("tenant_id",e.id).order("payment_date",{ascending:!1});if(console.log("Payments data:",t),a.success&&a.data&&a.data.length>0)console.log("Setting tenant periods:",a.data),console.log("Number of periods found:",a.data.length),L(a.data),w(!0),console.log("Modal should now be visible, showPeriodsModal:",!0);else{console.log("No rent periods found, attempting to generate them..."),b.ZP.success("Generating rent periods for this tenant...");try{let{data:a}=await l.supabase.from("RENT_leases").select("*").eq("tenant_id",e.id).order("lease_start_date",{ascending:!1}).limit(1);if(a&&a.length>0){let t=a[0],s=await l.RentPeriodsService.createRentPeriods(e,t);s.success&&s.data?(console.log("Successfully generated rent periods:",s.data),L(s.data),w(!0),b.ZP.success("Rent periods generated successfully")):(console.error("Failed to generate rent periods:",s.error),b.ZP.error("Failed to generate rent periods. Please run the generation script."),w(!0))}else console.log("No leases found for tenant"),b.ZP.error("No lease information found for this tenant. Please add a lease first."),w(!0)}catch(e){console.error("Error generating rent periods:",e),b.ZP.error("Error generating rent periods. Please run the generation script."),w(!0)}}}catch(e){console.error("Error loading rent periods:",e),b.ZP.error("Error loading rent periods")}},F=async(e,a)=>{try{(await l.RentPeriodsService.updateRentPeriod(e,{late_fee_applied:a,late_fee_waived:0===a})).success?(b.ZP.success("Late fee updated successfully"),N(null),S(0),await T()):b.ZP.error("Failed to update late fee")}catch(e){b.ZP.error("Error updating late fee")}};return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(console.log("LateTenantsPage render - showPeriodsModal:",v,"selectedTenantPeriods:",_),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Late Tenants"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Tenants more than 5 days late on rent"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Late Tenants"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.length})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Amount Due"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",e.reduce((e,a)=>e+(a.total_due||0),0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Late Fees"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["$",e.reduce((e,a)=>e+(a.total_late_fees||0),0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Amount Due"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["$",e.length>0?(e.reduce((e,a)=>e+(a.total_due||0),0)/e.length).toFixed(0):0]})]})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===e.length?(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-content text-center py-12",children:[(0,s.jsx)(n.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Late Tenants"}),(0,s.jsx)("p",{className:"text-gray-600",children:"All tenants are current on their rent payments."})]})}):(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"card-title",children:"Late Tenants"}),(0,s.jsx)("p",{className:"card-description",children:"Manage late tenants and generate notices"})]})})}),(0,s.jsx)("div",{className:"card-content",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tenant"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Property"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Cadence"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Amount"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Periods"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Fees"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Total Due"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>{var a;let t=e.total_due||0,r=k(e),l=R(e),n=e.late_periods||0,c=e.total_late_fees||0,o=D(t);return(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-100 ".concat(o),children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.phone})]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"text-gray-900",children:(null===(a=e.properties)||void 0===a?void 0:a.name)||"No property"})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"text-sm text-gray-600 capitalize",children:l})}),(0,s.jsxs)("td",{className:"py-4 px-4 font-medium text-gray-900",children:["$",r.toLocaleString()]}),(0,s.jsx)("td",{className:"py-4 px-4 font-medium text-gray-900",children:n}),(0,s.jsxs)("td",{className:"py-4 px-4 font-medium text-gray-900",children:["$",c.toLocaleString()]}),(0,s.jsxs)("td",{className:"py-4 px-4 font-medium text-red-600",children:["$",t.toLocaleString()]}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>Z(e),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 flex items-center",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"View Periods"]}),(0,s.jsxs)("button",{onClick:()=>C(e),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Notice"]})]})})]},e.id)})})]})})})]})}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Rent Periods & Late Fee Management"})]}),(0,s.jsx)("button",{onClick:()=>w(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]}),(0,s.jsx)("div",{className:"p-6",children:0===_.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(i.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Rent Periods Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"No rent periods have been generated for this tenant yet."}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-left max-w-md mx-auto",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Tenant Summary:"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Due:"})," $",((null==p?void 0:p.total_due)||0).toLocaleString()]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Late Fees:"})," $",((null==p?void 0:p.total_late_fees)||0).toLocaleString()]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Late Periods:"})," ",(null==p?void 0:p.late_periods)||0]})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Totals Comparison:"}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:[(0,s.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"✓ Late Tenants Service (Correct):"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Total Due:"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["$",((null==p?void 0:p.total_due)||0).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Late Fees:"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["$",((null==p?void 0:p.total_late_fees)||0).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Late Periods:"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-green-600",children:(null==p?void 0:p.late_periods)||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Days Late:"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-green-600",children:(null==p?void 0:p.days_late)||0})]})]})]}),(0,s.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[(0,s.jsx)("h5",{className:"font-medium text-blue-800 mb-2",children:"ℹ Rent Periods Data (For Reference):"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Total Periods:"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-blue-600",children:_.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Unpaid Amount:"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",_.filter(e=>"paid"!==e.status).reduce((e,a)=>e+(a.rent_amount-a.amount_paid),0).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Late Fees:"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",_.filter(e=>!e.late_fee_waived).reduce((e,a)=>e+a.late_fee_applied,0).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Total Due:"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",(_.filter(e=>"paid"!==e.status).reduce((e,a)=>e+(a.rent_amount-a.amount_paid),0)+_.filter(e=>!e.late_fee_waived).reduce((e,a)=>e+a.late_fee_applied,0)).toLocaleString()]})]})]})]}),(0,s.jsx)("div",{className:"mt-3 text-sm text-gray-600",children:(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Note:"})," The Late Tenants Service uses a different calculation method based on lease start dates and actual payments, which is why the totals may differ from the rent periods data."]})})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Due Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Amount"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Amount Paid"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Fee"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:_.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:new Date(e.period_due_date).toLocaleDateString()}),(0,s.jsxs)("td",{className:"py-4 px-4 font-medium",children:["$",e.rent_amount.toLocaleString()]}),(0,s.jsxs)("td",{className:"py-4 px-4",children:["$",e.amount_paid.toLocaleString()]}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("paid"===e.status?"bg-green-100 text-green-800":"partial"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(null==y?void 0:y.periodId)===e.id?(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",defaultValue:e.late_fee_applied,className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm",onChange:e=>S(parseFloat(e.target.value)||0),onKeyDown:a=>{"Enter"===a.key&&F(e.id,P)}}):(0,s.jsxs)("span",{className:"font-medium ".concat(e.late_fee_waived?"text-gray-500 line-through":"text-red-600"),children:["$",e.late_fee_applied.toLocaleString(),e.late_fee_waived&&" (waived)"]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(null==y?void 0:y.periodId)===e.id?(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("button",{onClick:()=>{F(e.id,P)},className:"bg-green-600 text-white p-1 rounded text-xs hover:bg-green-700",children:(0,s.jsx)(c.Z,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:()=>{N(null),S(0)},className:"bg-gray-600 text-white p-1 rounded text-xs hover:bg-gray-700",children:(0,s.jsx)(o.Z,{className:"w-3 h-3"})})]}):(0,s.jsx)("button",{onClick:()=>{S(e.late_fee_applied),N({tenantId:e.tenant_id,periodId:e.id,lateFee:e.late_fee_applied})},className:"bg-blue-600 text-white p-1 rounded text-xs hover:bg-blue-700",children:(0,s.jsx)(x.Z,{className:"w-3 h-3"})})})]},e.id))})]})})]})})]})}),g&&p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"5-Day Notice to Vacate or Pay Rent"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>{window.print()},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,s.jsx)("button",{onClick:()=>u(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center",children:"Close"})]})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(j,{tenant:p})})]})})]}))}}},function(e){e.O(0,[334,134,677,286,293,528,744],function(){return e(e.s=6425)}),_N_E=e.O()}]);